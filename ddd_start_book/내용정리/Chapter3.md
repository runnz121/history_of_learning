# 3. 애그리거트

1. 애그리거트
    - 모델 이해 및 일관성 관리 
    - 관련된 모델을 모았기 때문에 속해있는 객체는 유사하거나 동일한 라이프사이클을 ㄱ자음
   경게 설정
    - 도메인 규칙과 요구사항
    - 도메인 단순화

2. 애그리거트 루트
   - 애그리거트는 여러 객체로 구성됨 -> 전체 객체 상태가 정상이여야함
   - 일관된 상태 유지 -> 애그리거트 전체를 관리할 주체가 필요 -> 애그리거트 루트 엔티티 == 대표엔티티
   
    1. 애그리거트에 속한 객체의 일관성이 깨지면 안됨
    2. 애그리거트 외부에서 애그리거트에 속한 객체를 직접 변경하면 안됨 -> 변경시 일관성이 깨짐
    3. 애그리거트 루트를 통해서만 도메인 로직을 구현하기 위한 방법
       3-1. 단순 필드 변경 set 메서드를 public으로 만들지 않는다
        - 이름이 있는 메서드 사용 
       3-2. 밸류타입은 불변으로 구현한다

3. 리포지터리와 애그리거트
   - 영속성을 처리하는 리포지터리는 애그리거트 단위로 존재한다
   - 리포지터리는 애그리거트 전체를 저장소에 영속화 해야 한다

4. ID를 이용한 애그리거트 참조
    - 애그리거트 참조 야기 문제
      1. 편한 탐색 오용
      2. 성능에 대한 고민
      3. 확장 어려움
    - 한 애그리거트에서 다른 애그리거트 상태 변경 금지
    
    - ID 참조를 사용하면 객체 참조로 연결되지 않는다 == 애그리거트에 속한 객체들만 참조로 연결된다
   
5. 애그리거트 간 집합 연관
6. 애그리거트를 팩토리로 사용하기