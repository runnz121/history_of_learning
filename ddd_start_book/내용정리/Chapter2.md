# 2. 아키텍처 개요

1. 네개의 영역
   1. 표현영역 : HTTP 요청 파라미터로 전송한 데이터를 객체로 변환
   2. 응용영역 : 기능을 구현하기 위한 도메인 영역모델 사용
   3. 도메인영역 : 도메인 모델 구현
   4. 인프라스트럭쳐영역 : 구현 기술 영역

2. 계층 구조 아키텍처
   1. 계층 구조는 상위 계층에서 하위 계층으로만 의존한다

3. DIP (의존역전 원칙)
   1. 저수준 모듈이 고수준 모듈에 의존하도록 바꾼다. (원래는 반대)
      - 고수준 : 고객 정보를 구한다, 룰을 이용해서 할인 금액을 구한다 (service.class)
      - 저수준 : RDBMS에서 JPA로 구현한다, 룰을 작성한다
   
    - 방법 : 추상화 인터페이스
      - service.class에서 구현체는 중요하지 않다.

4. 도메인 영역의 주요 구성요소
   - 엔티티 : 고유 식별자를 갖는 객체, 자신의 라이프 사이클을 갖는다. 도메인의 고유한 개념을 표현한다
   - 밸류 : 고유 식별자를 갖지 않는 객체로 값을 표현할 떄 사용한다.
   - 애그리거트 : 연관된 엔티티와 밸류 객체를 개념적으로 묶은 것
   - 리포지터리 : 도메인 모델의 영속성을 처리한다
   - 도메인 서비스 : 특정 엔티티에 속하지 않는 도메인 로직을 제공

4-1. 엔티티와 밸류
    - 차이점
        - 도메인 모델의 엔티티는 데이터와 함께 도메인 기능을 제공한다
        - 데이터와 함께 기능을 제공한다.
        - 두 개 이상의 데이터가 개념적으로 하나인 경우 밸류타입을 이용해 표현 가능

4-2. 애그리거트
    - 관련 객체를 하나로 묶은 군집이다.
    - 루트 엔티티가 존재한다.
    - 애그리거트 루트가 제공하는 기능을 통해 간접적으로 애그리거트 내의 다른 엔티티나 밸류에 접근함

4-3. 리포지터리
    - 구현을 위한 도메인 모델
    - 애그리거트 단위로 도메인 객체를 저장하고 조회하는 기능을 정의
    - 응용 서비스는 도메인 객체를 구할때 리포지터리를 이용
    - 응용 서비스는 트랜잭션을 관리하는데, 트랜적션 처리는 구현 기술에 영향을 받음

5. 요청 처리 흐름
   - 응용 서비스는 도메인모델을 이용해서 기능을 구현

6. 인프라스트럭처 개요
   - 표현, 응용, 도메인영역을 지원

7. 모듈 구성
   - 도메인이 크다 -> 하위 도메인으로 나누고 별도의 패키지 구성